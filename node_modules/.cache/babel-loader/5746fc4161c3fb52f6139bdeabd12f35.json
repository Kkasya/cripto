{"ast":null,"code":"import axios from \"axios\";\nimport { addAssets } from \"../store/assetReducer\";\nimport { addAssets24, addDetails } from \"../store/detailsReducer\";\nimport { getDetails } from \"./utils\";\n\nconst getCripto = (page, limit) => {\n  return async dispatch => {\n    const response = await axios.get('https://api.coincap.io/v2/assets', {\n      params: {\n        limit: limit,\n        offset: (page - 1) * limit\n      }\n    });\n    dispatch(addAssets(response.data.data));\n  };\n};\n\nconst getCurrentCripto = (id, start, end, isDetails) => {\n  return async dispatch => {\n    console.log('dispatch');\n\n    const func = async () => {\n      const response = await axios.get(`https://api.coincap.io/v2/assets/${id}/history`, {\n        params: {\n          interval: 'h1',\n          start: start,\n          end: end\n        }\n      });\n      console.log(response);\n\n      if (isDetails) {\n        dispatch(addDetails(getDetails(response.data.data)));\n      } else dispatch(addAssets24(response.data.data));\n    };\n\n    let count = 0;\n    console.log(count);\n\n    while (count < 10) {\n      try {\n        func();\n        count = 10;\n      } catch (e) {\n        count += 1;\n      }\n    }\n  };\n};\n\nexport { getCripto, getCurrentCripto };","map":{"version":3,"sources":["J:/js/cripto/src/common/fetch.js"],"names":["axios","addAssets","addAssets24","addDetails","getDetails","getCripto","page","limit","dispatch","response","get","params","offset","data","getCurrentCripto","id","start","end","isDetails","console","log","func","interval","count","e"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,uBAAxB;AACA,SAAQC,WAAR,EAAqBC,UAArB,QAAsC,yBAAtC;AACA,SAAQC,UAAR,QAAyB,SAAzB;;AAEA,MAAMC,SAAS,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC/B,SAAO,MAAOC,QAAP,IAAoB;AACvB,UAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAU,kCAAV,EAA8C;AACjEC,MAAAA,MAAM,EAAE;AACJJ,QAAAA,KAAK,EAAEA,KADH;AAEJK,QAAAA,MAAM,EAAE,CAACN,IAAI,GAAG,CAAR,IAAaC;AAFjB;AADyD,KAA9C,CAAvB;AAMAC,IAAAA,QAAQ,CAACP,SAAS,CAACQ,QAAQ,CAACI,IAAT,CAAcA,IAAf,CAAV,CAAR;AACH,GARD;AASH,CAVD;;AAYA,MAAMC,gBAAgB,GAAG,CAACC,EAAD,EAAKC,KAAL,EAAYC,GAAZ,EAAiBC,SAAjB,KAA+B;AACpD,SAAO,MAAOV,QAAP,IAAoB;AAC/BW,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;;AACQ,UAAMC,IAAI,GAAG,YAAY;AACrB,YAAMZ,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAW,oCAAmCK,EAAG,UAAjD,EAA4D;AAC/EJ,QAAAA,MAAM,EAAE;AACJW,UAAAA,QAAQ,EAAE,IADN;AAEJN,UAAAA,KAAK,EAAEA,KAFH;AAGJC,UAAAA,GAAG,EAAEA;AAHD;AADuE,OAA5D,CAAvB;AAOAE,MAAAA,OAAO,CAACC,GAAR,CAAYX,QAAZ;;AACA,UAAIS,SAAJ,EAAe;AACXV,QAAAA,QAAQ,CAACL,UAAU,CAACC,UAAU,CAACK,QAAQ,CAACI,IAAT,CAAcA,IAAf,CAAX,CAAX,CAAR;AACH,OAFD,MAEOL,QAAQ,CAACN,WAAW,CAACO,QAAQ,CAACI,IAAT,CAAcA,IAAf,CAAZ,CAAR;AACV,KAZD;;AAcR,QAAIU,KAAK,GAAG,CAAZ;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;;AACA,WAAOA,KAAK,GAAG,EAAf,EAAmB;AACf,UAAI;AACAF,QAAAA,IAAI;AACJE,QAAAA,KAAK,GAAG,EAAR;AACH,OAHD,CAGE,OAAOC,CAAP,EAAU;AACRD,QAAAA,KAAK,IAAI,CAAT;AACH;AACJ;AAEI,GA3BD;AA4BH,CA7BD;;AA+BA,SAAQlB,SAAR,EAAmBS,gBAAnB","sourcesContent":["import axios from \"axios\";\r\nimport {addAssets} from \"../store/assetReducer\";\r\nimport {addAssets24, addDetails} from \"../store/detailsReducer\";\r\nimport {getDetails} from \"./utils\";\r\n\r\nconst getCripto = (page, limit) => {\r\n    return async (dispatch) => {\r\n        const response = await axios.get('https://api.coincap.io/v2/assets', {\r\n            params: {\r\n                limit: limit,\r\n                offset: (page - 1) * limit,\r\n            }\r\n        });\r\n        dispatch(addAssets(response.data.data));\r\n    }\r\n};\r\n\r\nconst getCurrentCripto = (id, start, end, isDetails) => {\r\n    return async (dispatch) => {\r\nconsole.log('dispatch')\r\n        const func = async () => {\r\n            const response = await axios.get(`https://api.coincap.io/v2/assets/${id}/history`, {\r\n                params: {\r\n                    interval: 'h1',\r\n                    start: start,\r\n                    end: end,\r\n                }\r\n            });\r\n            console.log(response)\r\n            if (isDetails) {\r\n                dispatch(addDetails(getDetails(response.data.data)));\r\n            } else dispatch(addAssets24(response.data.data));\r\n        };\r\n\r\nlet count = 0;\r\nconsole.log(count)\r\nwhile (count < 10) {\r\n    try {\r\n        func();\r\n        count = 10;\r\n    } catch (e) {\r\n        count += 1;\r\n    }\r\n}\r\n\r\n    }\r\n};\r\n\r\nexport {getCripto, getCurrentCripto};"]},"metadata":{},"sourceType":"module"}